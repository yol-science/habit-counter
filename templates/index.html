<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ç¿’æ…£ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼</title>
<style>
body{
  font-family: Arial, sans-serif;
  text-align: center;
  background-color: #f5f7fa;
}

button{
  padding: 12px 20px;
  margin: 8px;
  font-size: 16px;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  background-color: #4CAF50;
  color: white;
}

button:hover{
  background-color: #45a049;
}
</style>
</head>
<body>

<h1>ãƒ©ã‚¤ãƒ•å¼ ç¿’æ…£ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼</h1>

<div id="buttons">
  <button onclick="add('exercise')">é‹å‹•</button>
  <button onclick="add('study')">å‹‰å¼·</button>
  <button onclick="add('meditation')">ç‘æƒ³</button>
</div>

<hr>

<div id="status"></div>

<script>
function heart(life){
  return "â¤ï¸".repeat(life) + "ğŸ–¤".repeat(3-life)
}

function add(activity){
  fetch("/api/add",{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({activity})
  }).then(()=>refresh())
}

function refresh(){
  fetch("/api/today")
    .then(r=>r.json())
    .then(data=>{
      const order = ["exercise", "study", "meditation"]

      let output=""

      order.forEach(key=>{
        if(data[key]){
          output += `
${key}
${heart(data[key].life)}
ç´¯è¨ˆ: ${data[key].total}

`
        }
      })

      document.getElementById("status").textContent=output
    })
}

refresh()
</script>

</body>
</html>